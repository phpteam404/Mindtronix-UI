<div class="main-content custom-maincontent-top">
    <!-- <div class="custom-view">
        <h4 class="custom-view-heading">Franchise Details</h4>
        <div class="custom-view-content">
          <div class="row">
              <div class="col-md-4 col-12">
                  <label>Franchise Name</label>
                  <p>Mindtronix Learning Centre</p>
              </div>
              <div class="col-md-4 col-12">
                <label>Email</label>
                <p>mindtronixlc@mindtronics.com</p>
            </div>
            <div class="col-md-4 col-12">
                <label>Contact Number</label>
                <p>7997666616</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>Created On</label>
                <p>20-02-2020</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>Status </label>
                <p>Active</p>
            </div>            
          </div>
        </div>
    </div>
    <div class="custom-view">
        <h4 class="custom-view-heading">Schools Information</h4>
        <div class="custom-view-content">
          <div class="row">
              <div class="col-md-4 col-12">
                  <label>No.of Schools</label>
                  <p>100</p>
              </div>
              <div class="col-md-4 col-12">
                <label>No.of Students / Parent</label>
                <p>100</p>
            </div>
            <div class="col-md-4 col-12">
                <label>No.of Trainers</label>
                <p>20</p>
            </div>
          </div>
        </div>
    </div>
    <div class="custom-view">
        <h4 class="custom-view-heading">Fee Structure</h4>
        <div class="custom-view-content">
          <div class="row">
              <div class="col-md-4 col-12">
                  <label>--</label>
                  <p>--</p>
              </div>
              <div class="col-md-4 col-12">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>-- </label>
                <p>--</p>
            </div>            
          </div>
        </div>
    </div>
    <div class="custom-view">
        <h4 class="custom-view-heading">Revenue</h4>
        <div class="custom-view-content">
          <div class="row">
              <div class="col-md-4 col-12">
                  <label>--</label>
                  <p>--</p>
              </div>
              <div class="col-md-4 col-12">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>-- </label>
                <p>--</p>
            </div>            
          </div>
        </div>
    </div> -->
    <div class="row view-page">
        <div class="col-md-9 col-12">
            <div class="custom-view-list">
                <div class="custom-view-div franchise-name">
                    <div>Franchise Name
                        <span>{{franchiseObj.franchise_name}}</span>
                    </div>
                </div>
                <div class="custom-view-div">
                    <div class="schools-text"># Schools
                        <span>{{franchiseExtraInfo.no_of_schools}}</span>
                    </div>
                </div>
                <div class="custom-view-div">
                    <div class="students-text"># Students
                        <span>{{franchiseExtraInfo.no_of_student}}</span>
                    </div>
                </div>
                <div class="custom-view-div">
                    <div class="trainers-text"># Trainers
                        <span>{{franchiseExtraInfo.no_of_trainers}}</span>
                    </div>
                </div>
            </div>
            <div class="custom-tabs clearfix">
                <p-tabView>
                    <p-tabPanel header="Franchise Details">
                        <div class="custom-view">
                            <div class="custom-view-content">
                                <div class="row">
                                    <div class="col-12 btn-edit">
                                      <a href="javascript:;" class="btn" (click)="showBasicDialog()"><i class="icon icon-edit-pencil"></i></a>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <label>Franchise Name</label>
                                        <p>{{franchiseObj.franchise_name}}</p>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <label>Franchise Code</label>
                                        <p>{{franchiseObj.franchise_code}}</p>
                                    </div>
                                    <div class="col-md-4 col-12">
                                        <label>Owner Name</label>
                                        <p>{{franchiseObj.owner_name}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>Contact Number</label>
                                        <p>{{franchiseObj.contact_number}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>Contact Email</label>
                                        <p>{{franchiseObj.email}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>Website Address</label>
                                        <p>{{franchiseObj.website_address}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>Address</label>
                                        <p>{{franchiseObj.address}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>Landmark</label>
                                        <p>{{franchiseObj.landmark}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>Country</label>
                                        <p>{{franchiseObj.country}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>State</label>
                                        <p>{{franchiseObj.state}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>City</label>
                                        <p>{{franchiseObj.city}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>Pincode</label>
                                        <p>{{franchiseObj.pincode}}</p>
                                    </div>
                                    <div class="col-md-4 col-12 mt-3">
                                        <label>Status</label>
                                        <p>{{franchiseObj.status | titlecase }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Contact Information">
                        <div class="custom-view">
                            <div class="custom-view-content">
                                <div class="row">
                                    <div class="col-12 custom-btn-edit" *ngIf="isEnabled()">
                                        <button type="button" title="Add Contact" class="btn" (click)="showBasicDialog1(true)"><i class="icon icon-plus"></i></button>
                                     </div>
                                    <div class="col-12">
                                        <div class="custom-table">
                                            <p-table #dt [columns]="cols" [value]="contacts" [paginator]="true" [rows]="10">                                              
                                                <ng-template pTemplate="header" let-columns>
                                                    <tr>
                                                        <th *ngFor="let col of columns; let i = index" [pSortableColumn]="col.field">
                                                            {{col.header}}
                                                            <!-- <p-sortIcon *ngIf="i != 4" [field]="col.field"></p-sortIcon> -->
                                                        </th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-rowData let-columns="columns">
                                                    <tr>
                                                        <td *ngFor="let col of columns ; let i = index">
                                                            <span *ngIf="i != 4" title="{{rowData[col.field]}}">{{rowData[col.field]}}</span>
                                                            <span *ngIf="i == 4 && isEnabled()"  class="d-flex action-color">
                                                                <a class="mr-2" href="javascript:;" (click)="editContact(rowData)">
                                                                    <span class="icon icon-edit-pencil" title="Edit"></span>
                                                                </a>
                                                                <a href="javascript:;" (click)="showBasicDialogDelete(rowData)">
                                                                    <span class="icon icon-delete" title="Delete"></span>
                                                                </a>
                                                            </span>
                                                            <span class="d-flex action-color" *ngIf="i == 4 && !isEnabled()">---</span>
                                                        </td>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="footer" let-columns>
                                                    <ng-container *ngIf="isEmptyTable1()">
                                                    <tr>
                                                      <td [attr.colspan]="columns.length" class="text-center">
                                                        No records found
                                                      </td>
                                                    </tr>
                                                    </ng-container>
                                                </ng-template>
                                            </p-table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Fee Management">
                        <div class="custom-view">
                            <div class="custom-view-content">
                                <div class="row">
                                    <div class="col-12 custom-btn-edit" *ngIf="isEnabled()">
                                        <button type="button" class="btn" title ="Add Fee Structure" (click)="showBasicDialog2()"><i class="icon icon-plus"></i></button>
                                     </div>
                                    <div class="col-12">
                                        <div class="custom-table ">
                                            <p-table #dt [columns]="FeeStructureCols" [value]="FeeList" [paginator]="false" [rows]="10">
                                                <!-- <ng-template pTemplate="caption">
                                                    <div class="custom-search">
                                                        <div class="input-search">
                                                            <input type="text" pInputText size="50" placeholder="Search..."
                                                            (input)="dt.filterGlobal($event.target.value, 'contains')" style="width:auto;">
                                                            <i class="fa fa-search"></i> 
                                                        </div>
                                                    </div>
                                                </ng-template> -->
                                                <ng-template pTemplate="header" let-columns>
                                                    <tr>
                                                        <th *ngFor="let col of columns; let i = index">
                                                            {{col.header}}
                                                            <!-- <p-sortIcon *ngIf="i != 4" [field]="col.field"></p-sortIcon> -->
                                                        </th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-rowData let-columns="columns">
                                                    <tr>
                                                        <td *ngFor="let col of columns ; let i = index">
                                                            <span *ngIf="i != 4" title="{{rowData[col.field]}}">{{rowData[col.field]}}</span>
                                                            <span *ngIf="i == 4 && isEnabled()"  class="d-flex action-color">
                                                                <a href="javascript:;" (click)="showFeeDelete(rowData)">
                                                                    <span class="icon icon-delete" title="Delete"></span>
                                                                </a>
                                                            </span>
                                                            <span class="d-flex action-color" *ngIf="i == 4 && !isEnabled()">---</span>
                                                        </td>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="footer" let-columns>
                                                    <ng-container *ngIf="isEmptyTable()">
                                                    <tr>
                                                      <td [attr.colspan]="columns.length" class="text-center">
                                                        No records found
                                                      </td>
                                                    </tr>
                                                    </ng-container>
                                                </ng-template>
                                            </p-table>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                        </div>                     
                    </p-tabPanel>
                </p-tabView>
            </div>
        </div>
        <div class="col-md-3 col-12 pl-0">
            <div class="custom-veiw-rightside">
                <div class="revenue-text revenue-month-dropdown">Revenue
                        <p-dropdown [options]="revenueMonth" placeholder="Feb 2020" itemSize="30"
                        name="contact_title" optionLabel="label" required></p-dropdown>                      
                </div>
                <div class="student-text">For Students
                    <div class="custom-flex"> <span> Invoiced<a href="javascript:;" class="green-text">₹
                                10,000</a></span><span>Collected<a href="javascript:;" class="green-text text-right">₹
                                5,000</a><a href="javascript:;" class="red-text text-right">- ₹
                                5,000</a><span class="due-text">Due</span></span>
                    </div>
                </div>
                <div class="student-text">For Mindtronix
                    <div class="custom-flex">
                        <span>Invoiced
                            <a href="javascript:;" class="green-text">₹ 10,000</a>
                        </span>
                        <span>Paid
                            <a href="javascript:;" class="red-text text-right">₹ 5,000</a>
                        </span>
                        <!-- <span class="due-text">Due</span> -->
                    </div>
                </div>
            </div>
            <div class="custom-static-view">
                <h4>Statistics</h4>
                <div [chart]="chart" width="200%" height="auto"></div>
            </div>
        </div>
    </div>
</div>
  <!-- franchise details popup -->
<p-dialog header="Edit Franchise Details" [(visible)]="displayBasic" [style]="{width: '65vw'}" [baseZIndex]="1">
    <form [formGroup]="firstForm" (ngSubmit)="firstFormSubmit()">
        <div class="row custom-form">
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>Franchise Name <span>*</span></label>
                    <input pinputtext type="text" placeholder="Name" name="name" formControlName="name" required>
                    <div class="invalid-feedback"
                            *ngIf="firstForm.controls.name.invalid && submitted1!=null && !submitted1"
                        [ngClass]=" 'error'">Franchise Name is required
                    </div> 
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>Franchise Code <span>*</span></label>
                    <input pinputtext type="text" placeholder="Code" name="code" formControlName="code" required>
                    <div class="invalid-feedback"
                            *ngIf="firstForm.controls.code.invalid && submitted1!=null && !submitted1"
                        [ngClass]=" 'error'">Franchise Code is required
                    </div> 
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>Owner Name <span>*</span></label>
                    <input pinputtext type="text" placeholder="Contact Person" name="contact_person" formControlName="contact_person" required>
                    <div class="invalid-feedback"
                        *ngIf="firstForm.controls.contact_person.invalid && submitted1!=null && !submitted1"
                        [ngClass]=" 'error'">Owner Name is required
                    </div>
                    
                </div>
            </div>
            <div class="col-md-4 col-12">
                <label>Contact Number <span>*</span></label>
                <input type="text" placeholder="Phone" pKeyFilter="int" formControlName="phone" name="phone" required>
                <div class="invalid-feedback"
                        *ngIf="firstForm.controls.phone.invalid && submitted1!=null && !submitted1"
                    [ngClass]=" 'error'">Contact number should be minimum 10 digits
                </div>                  
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>Contact Email <span>*</span></label>
                    <input pinputtext placeholder="Conatct Email" formControlName="email" name="email" type="email" required>
                    <div class="invalid-feedback"
                            *ngIf="firstForm.controls.email.invalid && submitted1!=null && !submitted1"
                        [ngClass]=" 'error'">Email is required and should be in proper format!
                    </div>                      
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>Website Address</label>
                    <input pinputtext placeholder="www.mindtronix.com" formControlName="website_address" name="website_address" type="text">
                </div>
            </div>
            <div class="col-md-12 col-12">
                <div class="form-group">
                    <label>Address</label>
                    <textarea pInputTextarea placeholder="Address" formControlName="address" name="address"></textarea>
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>Landmark</label>
                    <input pinputtext type="text" placeholder="Landmark" formControlName="landmark" name="landmark">
                </div>
            </div>                        
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>Country <span>*</span></label>
                    <p-dropdown [options]="country" formControlName="country" filter="true" placeholder="Select Country" itemSize="30"
                        name="state" optionLabel="label" required></p-dropdown>
                    <div class="invalid-feedback"
                            *ngIf="firstForm.controls.country.invalid && submitted1!=null && !submitted1"
                        [ngClass]=" 'error'">Country is required
                    </div>                        
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>State <span>*</span></label>
                    <p-dropdown [options]="state" formControlName="state" filter="true" placeholder="Select State" itemSize="30"
                        name="country" optionLabel="label" required></p-dropdown>
                    <div class="invalid-feedback"
                            *ngIf="firstForm.controls.state.invalid && submitted1!=null && !submitted1"
                        [ngClass]=" 'error'">State is required
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>City <span>*</span></label>
                    <p-dropdown [options]="city" formControlName="city" filter="true" placeholder="Select City" itemSize="30"
                        name="state" optionLabel="label" required></p-dropdown>
                    <div class="invalid-feedback"
                            *ngIf="firstForm.controls.city.invalid && submitted1!=null && !submitted1"
                        [ngClass]=" 'error'">City is required
                    </div>                     
                </div>
            </div> 
            <div class="col-md-4 col-12">
                <label>Pincode</label>
                <input type="text" placeholder="Pincode" pKeyFilter="int" formControlName="pincode" name="pincode">
            </div>                       
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>Status <span>*</span></label>
                    <p-dropdown [options]="status" formControlName="status" placeholder="Select Status" itemSize="30"
                    name="status" optionLabel="label" required></p-dropdown>
                    <div class="invalid-feedback"
                        *ngIf="firstForm.controls.status.invalid && submitted1!=null && !submitted1"
                        [ngClass]=" 'error'"> Status is required
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center mb-2">
            <button pButton class="btn-warning mr-2" label="Update" type="submit"></button>
            <button pButton class="btn-default" type="button" label="Cancel" (click)="hideBasicDialog()"></button>
        </div>
    </form>
<!-- <p-footer>
    <button type="button" pButton class="btn-warning" (click)="displayBasic=false" label="Yes"></button>
    <button type="button" pButton class="btn-default" (click)="displayBasic=false" label="No"></button>
</p-footer> -->
</p-dialog>
<!-- contact information popup -->
<p-dialog header={{header}} [(visible)]="displayBasic1" [style]="{width: '65vw'}" [baseZIndex]="10000">
    <form [formGroup]="secondForm" (ngSubmit)="secondFormSubmit()">
        <div class="row custom-form">
            <div class="col-md-6 col-12">
                <div class="form-group">
                    <label>Contact Title <span>*</span></label>
                    <p-dropdown [options]="title" formControlName="contact_title" placeholder="Select Title" itemSize="30"
                        name="contact_title" optionLabel="label" required></p-dropdown>
                    <div class="invalid-feedback"
                        *ngIf="secondForm.controls.contact_title.invalid && submitted2!=null && !submitted2"
                        [ngClass]=" 'error'"> Contact Title is required
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-12">
                <div class="form-group">
                    <label>Name <span>*</span></label>
                    <input pinputtext placeholder="Contact Name" type="text" formControlName="contact_name" name="contact_name" required>
                    <div class="invalid-feedback"
                        *ngIf="secondForm.controls.contact_name.invalid && submitted2!=null && !submitted2"
                       [ngClass]=" 'error'"> Contact Name is required
                    </div>                
                </div>
            </div>        
            <div class="col-md-6 col-12">
                <label>Contact Number <span>*</span></label>
                <input type="text" placeholder="Contact Number" pKeyFilter="int" formControlName="contact_number"
                    name="contact_phone" required>                           
                <div class="invalid-feedback"
                    *ngIf="secondForm.controls.contact_number.invalid && submitted2!=null && !submitted2"
                    [ngClass]=" 'error'"> Contact number should be minimum 10 digits
                </div>                
            </div>
            <div class="col-md-6 col-12">
                <div class="form-group">
                    <label>Contact Email <span>*</span></label>
                    <input pinputtext placeholder="Contact Email" type="email" formControlName="contact_email" name="contact_email" required>
                    <div class="invalid-feedback"
                        *ngIf="secondForm.controls.contact_email.invalid && submitted2!=null && !submitted2"
                        [ngClass]=" 'error'">Enter valid email
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center col-12 mb-2">
            <button pButton class="btn-warning mr-2" type="submit" *ngIf="buttonDisabled" label="Save"></button> 
            <button pButton class="btn-warning mr-2" type="submit" *ngIf="!buttonDisabled" label="Update"></button> 
            <button pButton class="btn-default" type="button" label="Cancel" (click)="hideBasicDialog()"></button>
        </div>
    </form>
</p-dialog>
<!-- fee management popup -->
<p-dialog header="Create Fee Structure" [(visible)]="displayBasic2" [style]="{width: '65vw'}" [baseZIndex]="10000">    
    <form [formGroup]="thirdForm" (ngSubmit)="thirdFormSubmit()">
        <div class="row custom-form">
            <div class="col-md-6 col-12 mb-3">
                <label>Fee Structure <span>*</span></label>
                <p-multiSelect [options]="FeeStructureList" optionLabel="name" formControlName="fee_structure"
                    name="fee_structure" defaultLabel="Select Fee Structure" required></p-multiSelect>  
                <div class="invalid-feedback"
                        *ngIf="thirdForm.controls.fee_structure.invalid && submitted3!=null && !submitted3"
                    [ngClass]=" 'error'">Fee Structure is required
                </div>
            </div>
            <!-- <div class="col-md-1 col-12 mb-3 mt-4">
                <button  class="btn-warning add-icon-btn" type="submit" title="Add">+</button>
            </div> -->
        </div>
        <div class="text-center mb-2">
            <button pButton class="btn-warning mr-2" type="submit" label="Save"></button>
            <button pButton class="btn-default" type="button" label="Cancel" (click)="hideBasicDialog();"></button>
        </div>
    </form>
    <!-- <div class="custom-table custom-lastchild-list mt-3">
        <p-table #dt [columns]="FeeStructureCols" [value]="FeeList" [paginator]="false" [rows]="10">           
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of columns; let i = index" [pSortableColumn]="col.field">
                        {{col.header}}
                        <p-sortIcon *ngIf="i != 4" [field]="col.field"></p-sortIcon>
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr>
                    <td *ngFor="let col of columns ; let i = index">
                        <span *ngIf="i != 4" title="{{rowData[col.field]}}">{{rowData[col.field]}}</span>
                        <span *ngIf="i == 4" class="text-right">
                            <a href="javascript:;">
                                <span class="icon icon-delete" title="Delete"></span>
                            </a>
                        </span>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div> -->
</p-dialog>
<p-dialog header="confirmation" [(visible)]="displayBasicDialog" [style]="{width: '50vw'}" [baseZIndex]="10000">
    Are you sure you want to delete this record ?
  <p-footer>
      <button type="button" pButton class="btn-warning" (click)="deleteFranchiseContact()" label="Yes"></button>
      <button type="button" pButton class="btn-default" (click)="displayBasicDialog=false" label="No"></button>
  </p-footer>
</p-dialog>
<p-dialog header="confirmation" [(visible)]="displayFeeDialog" [style]="{width: '50vw'}" [baseZIndex]="10000">
    Are You Sure You Want To Permanently Delete This Record ???
  <p-footer>
      <button type="button" pButton class="btn-warning" (click)="deleteFranchiseFee()" label="Yes"></button>
      <button type="button" pButton class="btn-default" (click)="displayFeeDialog=false" label="No"></button>
  </p-footer>
</p-dialog>