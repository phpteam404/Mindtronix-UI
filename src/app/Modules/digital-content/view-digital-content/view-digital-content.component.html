<div class="main-content  custom-maincontent-top">
    <!-- <div class="custom-view">
        <h4 class="custom-view-heading">Franchise Details</h4>
        <div class="custom-view-content">
          <div class="row">
              <div class="col-md-4 col-12">
                  <label>Franchise Name</label>
                  <p>Mindtronix Learning Centre</p>
              </div>
              <div class="col-md-4 col-12">
                <label>Email</label>
                <p>mindtronixlc@mindtronics.com</p>
            </div>
            <div class="col-md-4 col-12">
                <label>Contact Number</label>
                <p>7997666616</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>Created On</label>
                <p>20-02-2020</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>Status </label>
                <p>Active</p>
            </div>
            
          </div>
        </div>
    </div>
    <div class="custom-view">
        <h4 class="custom-view-heading">Schools Information</h4>
        <div class="custom-view-content">
          <div class="row">
              <div class="col-md-4 col-12">
                  <label>No.of Schools</label>
                  <p>100</p>
              </div>
              <div class="col-md-4 col-12">
                <label>No.of Students / Parent</label>
                <p>100</p>
            </div>
            <div class="col-md-4 col-12">
                <label>No.of Trainers</label>
                <p>20</p>
            </div>
          </div>
        </div>
    </div>
    <div class="custom-view">
        <h4 class="custom-view-heading">Fee Structure</h4>
        <div class="custom-view-content">
          <div class="row">
              <div class="col-md-4 col-12">
                  <label>--</label>
                  <p>--</p>
              </div>
              <div class="col-md-4 col-12">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>-- </label>
                <p>--</p>
            </div>
            
          </div>
        </div>
    </div>
    <div class="custom-view">
        <h4 class="custom-view-heading">Revenue</h4>
        <div class="custom-view-content">
          <div class="row">
              <div class="col-md-4 col-12">
                  <label>--</label>
                  <p>--</p>
              </div>
              <div class="col-md-4 col-12">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>--</label>
                <p>--</p>
            </div>
            <div class="col-md-4 col-12 mt-2">
                <label>-- </label>
                <p>--</p>
            </div>
            
          </div>
        </div>
    </div> -->
    <div class="row view-page">
        <div class="col-md-9 col-12">
            <div class="custom-view-list">
                <div class="custom-view-div franchise-name">
                    <div>{{'digitalContent.add.category'|translate}}
                        <span>{{digitalContentObj.category}}</span>
                    </div>
                </div>
                <div class="custom-view-div">
                    <div class="schools-text">{{'digitalContent.add.subCategory'|translate}}
                        <span>{{digitalContentObj.sub_category}}</span>
                    </div>
                </div>
                <div class="custom-view-div custom-leftborder">
                    <div class="schools-text">{{'digitalContent.add.contentLevel'|translate}}
                        <span>{{digitalContentObj.content_level}}</span>
                    </div>
                </div>
                <div class="custom-view-div custom-leftborder">
                    <div class="students-text">{{'digitalContent.view.noOfViews'|translate}}
                        <span>{{digitalContentObj.no_of_views}}</span>
                    </div>
                </div>
                <!-- <div class="custom-view-div">
                    <div class="trainers-text qr-code">
                        <a href="javascript:;"><img src="/assets/img/QR-code.png"></a>
                       <a href="javascript">http://bit.ly/2uwV5jv</span>
                    </div>
                </div> -->
            </div>
            <div class="digital-content-view clearfix">
                <div class="custom-view">
                    <div class="custom-view-content">
                        <div class="row">
                            <div class="col-12 btn-edit">
                                <a href="javascript:;" class="btn" (click)="updateContentModal(true)"><i class="icon icon-edit-pencil"></i></a>
                            </div>
                            <div class="col-md-4 col-12">
                                <label>{{'digitalContent.add.contentName'|translate}}</label>
                                <p>{{digitalContentObj.content_name}}</p>
                            </div>
                            <div class="col-md-4 col-12">
                                <label>{{'digitalContent.add.contentDescription'|translate}}</label>
                                <p>{{digitalContentObj.description}}</p>
                            </div>
                            <div class="col-md-4 col-12">
                                <label>{{'digitalContent.add.category'|translate}}</label>
                                <p>{{digitalContentObj.category}}</p>
                            </div>
                            <div class="col-md-4 col-12 mt-3">
                                <label>{{'digitalContent.add.subCategory'|translate}}</label>
                                <p>{{digitalContentObj.sub_category}}</p>
                            </div>
                            <div class="col-md-4 col-12 mt-3">
                                <label>{{'digitalContent.add.grade'|translate}}</label>
                                <p>{{digitalContentObj.grade}}</p>
                            </div>
                            <div class="col-md-4 col-12 mt-3">
                                <label>{{'digitalContent.add.contentLevel'|translate}}</label>
                                <p>{{digitalContentObj.content_level}}</p>
                            </div>
                            <div class="col-md-4 col-12 mt-3">
                                <label>{{'digitalContent.add.tags'|translate}} </label>
                                <p>{{digitalContentObj.tags}}</p>
                            </div>
                            <div class="col-md-4 col-12 mt-3">
                                <label>{{'digitalContent.add.expiryDate'|translate}}</label>
                                <p>{{digitalContentObj.expiry_date | date: 'dd MMM,yyyy'}}</p>
                            </div>
                            <div class="col-md-4 col-12 mt-3">
                                <label>{{'digitalContent.add.status'|translate}}</label>
                                <p>{{digitalContentObj.status}}</p>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
            <div class="attachements-list">
                <h4>{{'ticket.view.attachments'|translate}}</h4>
                <div class="custom-table">
                    <div class ="row">
                        <div class="col-12 custom-btn-plus">
                            <button type="button"  class="btn" (click)="uploadAttachmentModal(true)"><i class="icon icon-plus"></i></button>
                       </div>
                    </div>
                    <p-table #dt [columns]="cols" [value]="documents" [lazy]="true" [totalRecords]="totalRecords">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns; let i = index" [pSortableColumn]="col.alias">
                                    {{col.header}}
                                    <p-sortIcon *ngIf="i != 6" [field]="col.field"></p-sortIcon>
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                            <tr>
                                <td *ngFor="let col of columns ; let i = index" (click)="rowData['type']!='pdf' && i!=2 && previewAttachment(rowData)">
                                    <span *ngIf="i == 0"  class="d-flex action-color attache-img">
                                        <img *ngIf="rowData['type'] == 'pdf'" src="{{prdAssetPath}}/assets/img/attachement-imgs/pdf-file.png" alt=""> 
                                        <img *ngIf="(rowData['type'] == 'mp4')" src="{{prdAssetPath}}/assets/img/attachement-imgs/mp4-file.png" alt=""> 
                                        <img *ngIf="(rowData['type'] == 'mov')" src="{{prdAssetPath}}/assets/img/attachement-imgs/mov-file.png" alt=""> 
                                        <img *ngIf="(rowData['type'] == 'jpeg') || (rowData['type'] == 'jpg') || (rowData['type'] == 'png')"
                                             src="{{rowData['document_url']}}" alt=""> 
                                    </span>
                                    <a *ngIf="i == 1 && rowData['type']=='pdf'" title="{{rowData[col.field]}}" 
                                        href="javascript:;" (click)="downloadPdf(rowData['document_url'],rowData[col.field])">
                                        {{rowData[col.field]}}
                                    </a>
                                    <span *ngIf="i == 1 && rowData['type']!='pdf'" title="{{rowData[col.field]}}">
                                       {{rowData[col.field]}}
                                    </span>
                                    <span *ngIf="i == 2"  class="d-flex action-color">
                                        <a href="javascript:;" (click)="DeleteAttachments(rowData)" title="Delete">
                                            <span class="icon icon-delete wd-30"></span>
                                        </a>
                                    </span>
                               </td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="footer" let-columns>
                            <ng-container *ngIf="isEmptyTable()">
                                <tr>
                                    <td [attr.colspan]="columns.length" class="text-center">
                                        {{'general.noAttachments'|translate}}
                                    </td>
                                </tr>
                            </ng-container>
                        </ng-template>
                    </p-table>
                </div>
            </div>
        </div>
        <p-confirmDialog header="{{'general.deleteHeader' | translate}}" 
            acceptLabel="{{'general.acceptLabel' | translate}}"
            rejectLabel="{{'general.rejectLabel' | translate}}"
            message="{{'general.confirmDelete' | translate}}" 
            icon="pi pi-exclamation-triangle" class="confirm-dialog" appendTo="body">
        </p-confirmDialog>
        <div class="col-md-3 col-12 pl-0">
            <div class="custom-static-view">
                <div class="custom-view-div custom-viewbg">
                    <div class="trainers-text qr-code">
                        <img src="{{digitalContentObj.qr_code}}">
                    </div>
                    <div class="text-center">
                    <button class="btn-warning download-btn mt-2"><i class="icon icon-download-1 pr-2"></i>Download</button>
                    </div>
                    <div class="text-center url-text">http://bit.ly/2uwV5jv
                        <a href="javascript:;" class="icon icon-files-group"></a>
                    </div>
                </div>
                <div [chart]="chart" width="200%" height="auto" class="mt-4"></div>
            </div>
        </div>
    </div>
</div>
  <!-- content details popup -->
<p-dialog header="Update Content Details" [modal]="true" [draggable]="false" [resizable]="false"  appendTo="body" [(visible)]="editModal" [style]="{width: '65vw'}" [baseZIndex]="10000">
     <form [formGroup]="digitalForm" (ngSubmit)="submit()">
        <div class="row custom-form">
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>{{'digitalContent.add.contentName'|translate}} <span>*</span></label>
                    <input pinputtext placeholder="{{'digitalContent.add.contentName'|translate}}" disabled formControlName ="name" name="name" type="text" required>
                    <div class="invalid-feedback"
                            *ngIf="digitalForm.controls.name.invalid && submitted!=null && !submitted"
                            [ngClass]=" 'error'"> {{'errorMessages.contentName'|translate}}
                    </div>
                </div>
            </div>
            <div class="col-md-8 col-12">
                <div class="form-group">
                    <label>{{'digitalContent.add.contentDescription'|translate}}</label>
                    <textarea pInputTextarea placeholder="{{'digitalContent.add.contentDescription'|translate}}" formControlName ="description" name="Content Description"></textarea>
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>{{'digitalContent.add.category'|translate}} <span>*</span></label>
                    <p-dropdown [options]="categories" placeholder="{{'placeholder.category'|translate}}" itemSize="30"
                        name="category" optionLabel="label" formControlName ="category" filter ="true" required></p-dropdown>
                    <div class="invalid-feedback"
                        *ngIf="digitalForm.controls.category.invalid && submitted!=null && !submitted"
                        [ngClass]=" 'error'"> {{'errorMessages.category'|translate}}
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>{{'digitalContent.add.subCategory'|translate}} <span>*</span></label>
                    <p-dropdown [options]="sub_categories" placeholder="Select Sub Category" itemSize="30"
                        name="sub_category" filter="true" formControlName ="sub_category" optionLabel="label" required></p-dropdown>
                    <div class="invalid-feedback"
                        *ngIf="digitalForm.controls.sub_category.invalid && submitted!=null && !submitted"
                        [ngClass]=" 'error'">{{'errorMessages.subCategory'|translate}}
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>{{'digitalContent.add.grade'|translate}} <span>*</span></label>
                    <p-dropdown [options]="grade" placeholder="{{'placeholder.grade'|translate}}" itemSize="30"
                        name="grade" optionLabel="label" formControlName ="grade" required></p-dropdown>
                    <div class="invalid-feedback"
                        *ngIf="digitalForm.controls.grade.invalid && submitted!=null && !submitted"
                        [ngClass]=" 'error'">{{'errorMessages.grade'|translate}}
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>{{'digitalContent.add.contentLevel'|translate}} <span>*</span></label>
                    <p-dropdown [options]="contentLevel" placeholder="{{'placeholder.contentLevel'|translate}}" itemSize="30"
                        name="content_level" optionLabel="label" formControlName ="content_level"  filter="true" required></p-dropdown>
                    <div class="invalid-feedback"
                        *ngIf="digitalForm.controls.content_level.invalid && submitted!=null && !submitted"
                        [ngClass]=" 'error'">{{'errorMessages.contentLevel'|translate}}
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-12">
                <label>{{'digitalContent.add.tags'|translate}} <span>*</span></label>
                <p-chips formControlName="tags" name="tags" placeholder="Enter your tags here" [allowDuplicate]="false" required></p-chips> 
                <!-- <p-dropdown [options]="tags" placeholder="{{'placeholder.tags'|translate}}" itemSize="30"
                    name="tags" filter="true" optionLabel="label" formControlName ="tags" required></p-dropdown> -->
                <div class="invalid-feedback"
                    *ngIf="digitalForm.controls.tags.invalid && submitted!=null && !submitted"
                    [ngClass]=" 'error'">{{'errorMessages.contentTags'|translate}}
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>{{'digitalContent.add.expiryDate'|translate}}</label>
                    <p-calendar name="expiry_date" formControlName="expiry_date" [showIcon]="true" [minDate]="minDate"></p-calendar>
                </div>
            </div>
            <div class="col-md-4 col-12">
                <div class="form-group">
                    <label>{{'digitalContent.add.status'|translate}} <span>*</span></label>
                    <p-dropdown [options]="status"  itemSize="30" formControlName ="status"
                        name="status" optionLabel="label" required></p-dropdown>
                </div>
            </div>
        </div>
        <div class="text-center mb-2">
            <button pButton class="btn-warning mr-2" label="{{'buttons.update'|translate}}" type="submit"></button>
            <button pButton class="btn-default" type="button" label="{{'buttons.cancel'|translate}}" (click)="updateContentModal(false)"></button>
        </div>
    </form>
</p-dialog>
<p-dialog header="{{'digitalContent.view.contentAttachments'|translate}}" [modal]="true" [draggable]="false" [resizable]="false"  appendTo="body" [(visible)]="uploadAttachments" [style]="{width: '65vw'}" [baseZIndex]="10000">
    <form [formGroup]="AttachmentForm" (ngSubmit)="onSubmit()">
        <div class="row custom-form m-0">
           <div class="col-md-12 col-12">
               <div class="form-group">
                    <label>{{'digitalContent.add.fileUpload'|translate}} <span>*</span></label>
                   <input type="file" name="files" multiple formControlName="files" accept=".jpg, .jpeg, .png, .mp4, .mov , .pdf, .exs"
                       (change)="onFileSelect($event)" style="height: 45px;"/>
                    <div class="invalid-feedback"
                       [ngClass]="'error'">{{'errorMessages.allowedFileTypes'|translate}}
                   </div>
               </div>
           </div>
           <div class="col-md-6 col-12 mt-10" *ngIf="fileArr.length>0">
                <div class="form-group">
                    <label>{{'digitalContent.add.fileSelected'|translate}} </label>
                    <div *ngFor="let file of fileArr; let i = index" class="selected-file-list">
                        <span class="file-text" title="{{file.name}}">{{file.name}}</span>
                        <span class="file-size">{{file.sizeVal}}</span>
                        <span>
                            <a href="javascript:;" (click)="deleteSelectedFile(i)" title="{{'title.delete'|translate}}">
                                <span class="icon icon-delete wd-30"></span>
                            </a>
                        </span>
                    </div>
                </div>
            </div>
       </div>
       <div class="text-center mb-2">
           <button pButton class="btn-warning mr-2" label="{{'buttons.update'|translate}}" type="submit"></button>
           <button pButton class="btn-default" type="button" label="{{'buttons.cancel'|translate}}" (click)="uploadAttachmentModal(false)"></button>
       </div>
   </form>
</p-dialog>
<p-dialog header="View Attachement" [modal]="true" [draggable]="false" [resizable]="false"  appendTo="body" [(visible)]="previewFile" [style]="{width: '65vw'}" [baseZIndex]="10000">
    <div style="font-size:16px;text-align:center;padding:20px">
        <div class="row m-0">
            <div class="col-12" style="text-align:center">
                <img  src="{{previewUrl}}" *ngIf="(format != 'mp4' && format != 'mov')" height="400">
                <video src="{{previewUrl}}" *ngIf="(format == 'mp4' || format == 'mov')" height="400" controls></video>
           </div>
       </div>
    </div>
</p-dialog> 


